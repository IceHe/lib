title: ASM 汇编语言 5
date: 2015-04-05
noupdate: true
categories: [ASM]
tags: [ASM]
description: ASM - Note&#58; reg 寄存器，sreg 段寄存器。bx，si，di 和 bp。汇编语言中数据位置的表达，寻址方式。除法指令，伪指令 dd，dup 操作符。寻址方式对结构化数据的访问。
---

<ul><li>Created on 2014-10</li></ul><br/>

<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div>教材：《汇编语言》（第二版）王爽 著 清华大学出版社</div><div><br/></div><b>章八、数据处理的两个基本问题</b><div><b><br/></b><div>（1）处理的数据在什么地方？</div><div>（2）要处理的数据有多长？</div><div><br/></div><div>reg寄存器：</div><div>ax、bx、cx、dx，</div><div>ah、al、bh、bl、ch、cl、dh、dl，</div><div>sp、bp、si、di。</div><div><br/></div><div>sreg（segment register）段寄存器：</div><div>ds、ss、cs、es</div><div><br/></div><div>reg、sreg详见：<a href="evernote:///view/7264256/s33/8044c0d3-ee39-415c-ab93-3c3142fcfd6e/8044c0d3-ee39-415c-ab93-3c3142fcfd6e/" style="color: rgb(105, 170, 53);">《Assembly Language》 Note 2</a></div><div><br/></div><div>8.1 <b>bx，si，di 和 bp</b></div><div>（1）8086CPU中，只有这4个寄存器可以用在”[...]“中来进行内存单元的寻址。</div><div>（2）在 [...] 中，这4个寄存器可以单个出现，或<b>只能以4种组合出现</b>：</div><div>bx + si、bx + di、bp + si 和 bp + di。</div><div>（3）只要在 [...] 中<b>使用寄存器bp</b>，而指令中<b>没有显性地给出段地址</b>，<b>段地址就默认在ss中</b>。</div><div><br/></div><div>8.2 机器指令处理的数据在什么地方</div><div>绝大部分的<b>机器指令</b>都是进行<b>数据处理的指令</b>，大致可<b>分为 3 类：读取、写入、运算</b>。</div><div><br/></div><div>机器指令不关心数据的值，而关心指令执行前一刻，它要处理的数据的位置。</div><div><b>数据</b>可以<b>在</b> 3 个地方：<b>CPU内部、内存、端口</b>（端口以后详述）。</div><div><br/></div><div>8.3 汇编语言中数据位置的表达</div><div>（1）立即数（idata）</div><div>即是，直接包含在机器指令中的数据（执行前在CPU的指令缓冲器中）。</div><div>例： 1 &nbsp; &nbsp; 2000h &nbsp; &nbsp; 00010000b &nbsp; &nbsp; ‘abc’</div><div>（2）寄存器：ax、ss</div><div>（3）段地址（SA）和 偏移地址（EA）</div><div>例：[0] &nbsp; &nbsp; [bx] &nbsp; &nbsp; [bx+si] &nbsp; &nbsp; [bp+di+8]</div><div><br/></div><div>8.4 寻址方式</div><div>上一篇笔记的7.5处开始：<a href="evernote:///view/7264256/s33/ce7be01e-6f8e-42ae-ac96-e4dce5baedc0/ce7be01e-6f8e-42ae-ac96-e4dce5baedc0/" style="color:#69aa35">《Assembly Language》 Note 4</a></div><div><br/></div><div>8.5 指令要处理的数据有多长</div><div>8086CPU的指令，可以处理两种尺寸的数据，byte和word。</div><div>机器指令中，要指明是 字操作 或 字节操作。</div><div><br/></div><div>汇编语言判断操作数据长度的办法如下：</div><div>（1）通过寄存器名指明：</div><div>mov bx, ds:[0] &nbsp; &nbsp; // bx寄存器是两字节的，字操作</div><div>mov al, 1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // al寄存器是一字节的，字节操作</div><div>（2）没有寄存器名的情况下，用操作符 “&nbsp;<b>X ptr&nbsp;</b>”指明内存单元的长度，</div><div>在汇编指令中，<b>X可以为word或byte</b>。</div><div>mov <b>word ptr</b> ds:[0], 1</div><div>inc <b>byte ptr</b> ds:[0]</div><div>add <b>byte ptr</b> [bx], 8</div><div>（3）其它</div><div>有些指令默认了访问的是word字单元还是byte字节单元。</div><div>push [1000h] 操作的是word字单元，因为<b>push指令只进行word字操作</b></div><div><b><br/></b></div><div>8.7 div指令：除法指令。</div><div>（1）除数：有8位和16位两种，在一个reg或内存单位中。</div><div>（2）被除数：默认 <b>只放在AX</b>&nbsp;或 <b>放在DX和AX&nbsp;</b>中。</div><div>如果<b>除数为8位，则被除数为16位</b>，且默认<b>在AX中</b>存放；</div><div>如果<b>除数为16位，则被除数为32位</b>，且在DX和AX中存放，<b>DX放高16位，AX放低16位</b>。</div><div>（3）计算结果：</div><div>如果<b>除数为8位</b>，则<b>AL存储</b>除法操作的<b>商</b>，<b>AH存储</b>除法操作的<b>余数</b>；</div><div>如果除数<b>为16位</b>，则<b>AX</b>存储除法操作的<b>商</b>，<b>DX</b>存储除法操作的<b>余数</b>。</div><div>例：100001 除以 100—— 因为被除数大于65535=2^16，那么除数100要用16位来存：</div><div>mov dx, 1</div><div>mov ax, 86a1h &nbsp; &nbsp; // dx * 10000H + ax = 186A1H = 10001</div><div>mov bx, 100</div><div>div bx &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // div 指令跟着的只有一个参数，是除数</div><div><br/></div><div>8.8 伪指令 dd</div><div>db 定义byte字节型数据。</div><div>dw 定义word字型数据。</div><div><b>dd 定义dword双字型数据。（double word）</b></div><div><b><br/></b></div><div>8.9 <b>dup操作符</b></div><div>在汇编语言中，<b>dup</b>同<b>db，dw，dd</b>等一样，也是<b>由编译器识别处理的符号</b>。</div><div>例：</div><div>db 3 dup (0) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;定义3个字节，每个都是0，相当于 db 0, 0, 0</div><div>db 3 dup (0, 1, 2) &nbsp; 定义9个字节，它们是0, 1, 2,&nbsp;0, 1, 2,&nbsp;0, 1, 2。</div><div><br/></div><div>n为重复的次数</div><div>db &nbsp;n &nbsp;dup （重复的byte型data）</div><div>dw &nbsp;n &nbsp;dup （重复的word型data）</div><div>dd &nbsp;n &nbsp;dup &nbsp;（重复的dword型data）</div><div><br/></div><div><br/></div><div>实验7 寻址方式在结构化数据访问中的应用</div><div>题目要求请看原书：</div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">assume cs:code, ds:data</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">data segment</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db &apos;1975&apos;, &apos;1976&apos;, &apos;1977&apos;, &apos;1978&apos;, &apos;1979&apos;, &apos;1980&apos;, &apos;1981&apos;, &apos;1982&apos;, &apos;1983&apos;</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db &apos;1984&apos;, &apos;1985&apos;, &apos;1986&apos;, &apos;1987&apos;, &apos;1988&apos;, &apos;1989&apos;, &apos;1990&apos;, &apos;1991&apos;, &apos;1992&apos;</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db &apos;1993&apos;, &apos;1994&apos;, &apos;1995&apos;</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;</span></font> <font color="#010101" face="Times New Roman" size="1"><span style="font-size:9pt">以上是表示年的个字符串</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt"><br/></span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dd 16, 22, 382, 1356, 2390, 8000, 16000, 24486, 50065, 97479, 140417, 197514</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dd 345980, 590827, 803530, 1183000, 1843000, 2759000, 3753000, 4649000, 5937000</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;</span></font> <font color="#010101" face="Times New Roman" size="1"><span style="font-size:9pt">以上是表示年公司总收入的</span></font> <font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">dword</span></font><font color="#010101" face="Times New Roman" size="1"><span style="font-size:9pt">型数据</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt"><br/></span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dw 3, 7, 9, 13, 28, 38, 130, 220, 476, 778, 1001, 1442, 2258, 2793, 4037, 5635, 8226</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dw 11542, 14430, 15257, 17800</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;</span></font> <font color="#010101" face="Times New Roman" size="1"><span style="font-size:9pt">以上是表示年公司雇员人数的个</span></font> <font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">word</span></font><font color="#010101" face="Times New Roman" size="1"><span style="font-size:9pt">数据</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">data ends</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt"><br/></span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">table segment</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db 21 dup (&apos;year summ ne ?? &apos;)</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">table ends</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt"><br/></span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">code segment</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">start:&nbsp;&nbsp;mov ax, data</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov ds, ax</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov ax, table</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov es, ax</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt"><br/></span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov bx, 0</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov di, 0</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov si, 0</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov cx, 21</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt"><br/></span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">s:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov ax, ds:[bx]</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov es:[di], ax</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov ax, ds:2[bx]</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov es:2[di], ax</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt"><br/></span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov ax, ds:84[bx]</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov es:5[di], ax</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov ax, ds:86[bx]</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov es:7[di], ax</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt"><br/></span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov ax, ds:168[si]</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov es:10[di], ax</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt"><br/></span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov ax, es:5[di]</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov dx, es:7[di]</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;div word ptr es:10[di]</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov es:13[di], ax</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt"><br/></span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add bx, 4</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add di, 16</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inc si</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inc si</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt"><br/></span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loop s</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt"><br/></span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov ax, 4c00h</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int 21h</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">code ends</span></font></div><div align="left"><font color="#010101" face="新宋体" size="1"><span style="font-size:9pt">end start</span></font></div><div><br/></div><div><strong>Att - </strong><a title="Attachment 附件" href="http://7vzp67.com1.z0.glb.clouddn.com/Assembly%20Language%20-%20Note%205/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E7%AC%AC%E5%85%AB%E7%AB%A0%E5%AE%9E%E9%AA%8C7.asm" target="_blank">汇编语言第八章实验7.asm</a><br/></div></div></div>
