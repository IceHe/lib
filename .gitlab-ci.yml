image: ruby

before_script:
    - gem install mdl

stages:
    - parallel

md-lint:
    stage: parallel
    script:
        - mdl --style _ci/markdownlint/style.rb --list-rules
        - mdl --style _ci/markdownlint/style.rb --git-recurse .

# Deploy @ GitLab Pages
pages:
    stage: parallel
    script:
        # Build：temporary directory `.public/`
        - mkdir .public
        - cp -r * .public
        # Release：formal directory `public/`
        - mv .public public
    artifacts:
        paths:
            - public
    only:
        - master
