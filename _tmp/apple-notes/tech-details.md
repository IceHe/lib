# Tech Details

替换 Redis 实例

用域名调用 Redis 实例，
在 DNS 上修改域名对应的 IP 即可。

---

微博 阅读数的实现

阅读数完全存在 Redis 里面！
线性拟合的策略！

用 Redis 自带内含的功能去实现的！

1~100  每次写+1
100~1,000 每 5 次要写读数，随机丢弃其中 4 次，然后命中的那一次 + 5
1,000~10,000 … 依次类推，类似的算法，避免过多的写法。

现在希望变成可以完全每次 +1 的模式。
不过是从 8 台机器，散点哈希到 128 台实例上，以分担写压力！

---

发微博 用队列

- MPS 发推送 用队列
- mid 用统一的发号器，避免 mid 重复。
- 微博 用多层的 缓存来顶住压力！
- 找文章来看！(微博技术新兵训练营)

发号器：生成唯一的 ID 号

- Twitter 的 雪花算法 (snowflake)

服务机型要标准化

* Facebook 只有六种标准机型
* Google 只有十种标准机型

机型：（自己的猜想）

* 计算密集型（CPU型？显卡型）
* 内存型（缓存性）
* IO型（存储型？硬盘型？）
* GPU型（显卡型）

FB 机型：OCP 六种（肖鹏截图提供）？
（OCP: Open Compute Project）

* 网络
* 数据中心
* Hadoop
* 小文件存储
* 高速缓存
* 冷存储

https://en.wikipedia.org/wiki/Open_Compute_Project

![](ocp.png)